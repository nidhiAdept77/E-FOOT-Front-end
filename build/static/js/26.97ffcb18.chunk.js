(this["webpackJsonpefnl-dashboard"]=this["webpackJsonpefnl-dashboard"]||[]).push([[26],{101:function(e,t,a){"use strict";a(1);var n=a(111),s=a.n(n),c=a(4);t.a=function(e){var t=e.loading;return t&&Object(c.jsx)("div",{className:"sweet-loading",children:Object(c.jsx)(s.a,{color:"#1061ae",loading:t,style:{display:"block",margin:"0 auto"},size:100})})}},102:function(e,t,a){"use strict";var n=a(100),s=a(144),c=a(145),r=a(4);t.a=function(e){var t=e.breadCrumbTitle,a=e.breadCrumbParent,i=e.breadCrumbParent2,l=e.breadCrumbParent3,o=e.breadCrumbActive;return Object(r.jsx)("div",{className:"content-header row",children:Object(r.jsx)("div",{className:"content-header-left col-12 mb-2",children:Object(r.jsx)("div",{className:"row breadcrumbs-top",children:Object(r.jsxs)("div",{className:"col-12",children:[t?Object(r.jsx)("h2",{className:"content-header-title float-left mb-0",children:t}):"",Object(r.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(c.a,{tag:"li",children:Object(r.jsx)(n.b,{to:"/dashboard",children:"Dashboard"})}),a&&Object(r.jsx)(c.a,{tag:"li",className:"text-primary",children:a}),i?Object(r.jsx)(c.a,{tag:"li",className:"text-primary",children:i}):"",l?Object(r.jsx)(c.a,{tag:"li",className:"text-primary",children:l}):"",o&&Object(r.jsx)(c.a,{tag:"li",active:!0,children:o})]})})]})})})})}},117:function(e,t,a){},154:function(e,t,a){"use strict";var n=a(9),s=a(10),c=a(25),r=a(39),i=a(1),l=a.n(i),o=a(2),u=a.n(o),d=a(12),b=a.n(d),p=a(17),j={children:u.a.node,type:u.a.string,size:u.a.oneOfType([u.a.number,u.a.string]),bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:p.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},f=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,r=e.bsSize,i=e.valid,o=e.invalid,u=e.tag,d=e.addon,j=e.plaintext,f=e.innerRef,m=Object(s.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),h=["radio","checkbox"].indexOf(c)>-1,O=new RegExp("\\D","g"),g=u||("select"===c||"textarea"===c?c:"input"),v="form-control";j?(v+="-plaintext",g=u||"input"):"file"===c?v+="-file":"range"===c?v+="-range":h&&(v=d?null:"form-check-input"),m.size&&O.test(m.size)&&(Object(p.s)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=m.size,delete m.size);var x=Object(p.m)(b()(t,o&&"is-invalid",i&&"is-valid",!!r&&"form-control-"+r,v),a);return("input"===g||u&&"function"===typeof u)&&(m.type=c),m.children&&!j&&"select"!==c&&"string"===typeof g&&"select"!==g&&(Object(p.s)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete m.children),l.a.createElement(g,Object(n.a)({},m,{ref:f,className:x,"aria-invalid":o}))},t}(l.a.Component);f.propTypes=j,f.defaultProps={type:"text"},t.a=f},224:function(e,t,a){"use strict";var n=a(9),s=a(10),c=a(1),r=a.n(c),i=a(2),l=a.n(i),o=a(12),u=a.n(o),d=a(17),b=l.a.oneOfType([l.a.number,l.a.string]),p=l.a.oneOfType([l.a.bool,l.a.string,l.a.number,l.a.shape({size:b,order:b,offset:b})]),j={children:l.a.node,hidden:l.a.bool,check:l.a.bool,size:l.a.string,for:l.a.string,tag:d.q,className:l.a.string,cssModule:l.a.object,xs:p,sm:p,md:p,lg:p,xl:p,widths:l.a.array},f={tag:"label",widths:["xs","sm","md","lg","xl"]},m=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},h=function(e){var t=e.className,a=e.cssModule,c=e.hidden,i=e.widths,l=e.tag,o=e.check,b=e.size,p=e.for,j=Object(s.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),f=[];i.forEach((function(t,n){var s=e[t];if(delete j[t],s||""===s){var c,r=!n;if(Object(d.k)(s)){var i,l=r?"-":"-"+t+"-";c=m(r,t,s.size),f.push(Object(d.m)(u()(((i={})[c]=s.size||""===s.size,i["order"+l+s.order]=s.order||0===s.order,i["offset"+l+s.offset]=s.offset||0===s.offset,i))),a)}else c=m(r,t,s),f.push(c)}}));var h=Object(d.m)(u()(t,!!c&&"sr-only",!!o&&"form-check-label",!!b&&"col-form-label-"+b,f,!!f.length&&"col-form-label"),a);return r.a.createElement(l,Object(n.a)({htmlFor:p},j,{className:h}))};h.propTypes=j,h.defaultProps=f,t.a=h},239:function(e,t,a){"use strict";var n=a(0),s=a(11),c=a(1),r=a(12),i=a.n(r),l=a(629),o=a(43),u=a(4);t.a=function(e){var t=e.data,a=e.tag,r=e.className,d=a||"div";return Object(u.jsx)(d,{className:i()("avatar-group",Object(s.a)({},r,r)),children:t.map((function(e,t){var a=e.tag?e.tag:"div";return Object(u.jsxs)(c.Fragment,{children:[e.title?Object(u.jsx)(l.a,{placement:e.placement,target:e.title.split(" ").join("-"),children:e.title}):null,e.meta?null:Object(u.jsx)(o.a,Object(n.a)(Object(n.a)({tag:a,className:i()("pull-up",Object(s.a)({},e.className,e.className))},e.title?{id:e.title.split(" ").join("-")}:{}),{},{title:void 0,meta:void 0},e)),e.meta?Object(u.jsx)(a,{className:"d-flex align-items-center pl-1",children:e.meta}):null]},t)}))})}},626:function(e,t,a){"use strict";a.r(t);var n,s,c=a(14),r=a(1),i=a(102),l=a(568),o=a(101),u=a(22),d=a(586),b=a(169),p=a(170),j=a(224),f=a(154),m=a(173),h=a.n(m),O=a(616),g=(a(117),a(98)),v=a(104),x=a(99),y=a(106),N=a(8),C=a(105),R=a(38),k=a(40),S=a(5),w=S.SET_CHAT_REQUESTS,T=S.UPDATE_CHAT_REQUESTS,q=S.SET_LOADER,z=S.SET_TOTAL,E=function(e,t,a){return function(){var s=Object(x.a)(Object(g.a)().mark((function s(c){var r,i,l,o;return Object(g.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,c({type:q,payload:!0}),r=Object(y.a)(n||(n=Object(v.a)(["query getChatRequests($limit: Int, $skip: Int, $searchString: String){\n            getChatRequests(limit: $limit, skip: $skip, searchString: $searchString){\n              statusCode\n              success\n              message\n              nextToken\n              data{\n                totalPages\n                skip\n                limit\n                data {\n                  _id\n                  type\n                  status\n                  createdBy\n                  userList {\n                    _id\n                    firstName\n                    lastName\n                    profilePicture\n                  }\n                  createdAt\n                }\n              }\n            }\n          }"]))),s.next=5,C.a.query({query:r,variables:{limit:e,skip:t*e,searchString:a}});case 5:i=s.sent,l=i.data,Object(R.handleAuthResponse)(l.getChatRequests),l.getChatRequests.success&&(o=Object(R.getFieldValue)(l,"getChatRequests.data.data"),N.default.isEmpty(o)?(c({type:w,payload:[]}),c({type:z,payload:0})):(c({type:w,payload:o}),c({type:z,payload:Object(R.getFieldValue)(l,"getChatRequests.data.totalPages")}))),c({type:q,payload:!1}),s.next=19;break;case 13:s.prev=13,s.t0=s.catch(0),console.error("error: ",s.t0),c({type:w,payload:[]}),c({type:z,payload:0}),c({type:q,payload:!1});case 19:case"end":return s.stop()}}),s,null,[[0,13]])})));return function(e){return s.apply(this,arguments)}}()},P=function(e){var t=e._id,a=e.status;return function(){var e=Object(x.a)(Object(g.a)().mark((function e(n){var c,r,i;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:q,payload:!0}),c=Object(y.a)(s||(s=Object(v.a)(["\n        mutation acceptRejectChatRequest( $input: ChatRequestsAcceptRejectInput ) {\n            acceptRejectChatRequest( input: $input  ) {\n                statusCode\n                success\n                message\n                data {\n                _id\n                status\n                }\n            }\n        }"]))),e.next=5,C.a.mutate({mutation:c,variables:{input:{_id:t,status:a}}});case 5:return r=e.sent,i=r.data,Object(R.handleAuthResponse)(i.acceptRejectChatRequest),n({type:q,payload:!1}),i.acceptRejectChatRequest.success?n({type:T,payload:i.acceptRejectChatRequest.data}):n(Object(k.showToastMessage)(i.acceptRejectChatRequest.message,"error")),e.abrupt("return",i.acceptRejectChatRequest);case 13:e.prev=13,e.t0=e.catch(0),console.error("error: ",e.t0),n({type:q,payload:!1});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},_=a(174),A=a.n(_),L=a(20),$=a.n(L),M=a(97),B=a(130),D=a.n(B),F=a(129),I=a.n(F),H=a(4),U=function(e){var t=e.data,a=t._id,n=t.createdBy,s=t.status,i=Object(u.c)(),l=Object(u.d)((function(e){return e.auth})).user,o=(l=void 0===l?"":l)._id,d=void 0===o?"":o,b=function(){var e=Object(x.a)(Object(g.a)().mark((function e(){var t;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I()(D.a),e.next=3,t.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Reject it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1});case 3:e.sent.value&&a&&i(P({_id:a,status:"rejected"}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=Object(r.useState)(""),j=Object(c.a)(p,2),f=j[0],m=j[1];return Object(r.useEffect)((function(){return m(n!==d&&"pending"===s),function(){}}),[d,s]),f?Object(H.jsxs)("div",{className:"demo-inline-spacing",children:[Object(H.jsx)(M.a.Ripple,{className:"btn-icon m-0",color:"flat-success",onClick:function(){a&&i(P({_id:a,status:"accepted"}))},children:"Accept"}),Object(H.jsx)(M.a.Ripple,{className:"btn-icon m-0",onClick:b,color:"flat-danger",children:"Reject"})]}):""},V=a(239),J=function(e){var t=e.data.userList,a=Object(r.useState)([]),n=Object(c.a)(a,2),s=n[0],i=n[1],l=Object(u.d)((function(e){return e.auth.user}))._id;return Object(r.useEffect)((function(){if(t.length){var e=t.find((function(e){return e._id!==l})),a=e.firstName,n=e.lastName,s=e.profilePicture,c={title:"".concat(a," ").concat(n),img:s};i([c])}return function(){}}),[t,l]),Object(H.jsx)(V.a,{data:s.length?s:[]})},Q=function(e){var t=e.data.userList,a=Object(r.useState)(null),n=Object(c.a)(a,2),s=n[0],i=n[1],l=Object(u.d)((function(e){return e.auth.user}))._id;return Object(r.useEffect)((function(){if(null!==t&&void 0!==t&&t.length){var e=t.find((function(e){return e._id!==l})),a=e.firstName,n=e.lastName;i("".concat(a," ").concat(n))}return function(){}}),[t,l]),Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("span",{children:s})})},Y=[{name:"Profile Picture",selector:"userList",sortable:!0,cell:function(e){return Object(H.jsx)(J,{data:e})}},{name:"Name",selector:"name",sortable:!0,cell:function(e){return Object(H.jsx)(Q,{data:e})}},{name:"Status",selector:"status",sortable:!0,cell:function(e){var t=e.status;return Object(H.jsx)("span",{className:"text-capitalize",children:t})}},{name:"When",selector:"when",sortable:!0,cell:function(e){var t=e.createdAt;return Object(H.jsx)("span",{children:$()(new Date(parseInt(t))).fromNow()})}},{name:"Actions",sortable:!1,cell:function(e){return Object(H.jsx)(U,{data:e,isAdd:!1})}}];t.default=function(e){var t=Object(u.c)(),a=Object(u.d)((function(e){return e.chatRequests})),n=a.loading,s=a.total,m=a.chatRequests,g=Object(r.useState)(""),v=Object(c.a)(g,2),x=v[0],y=v[1],N=Object(r.useState)(6),C=Object(c.a)(N,2),R=C[0],k=(C[1],Object(r.useState)(0)),S=Object(c.a)(k,2),T=S[0],q=S[1],z=Object(r.useState)([]),P=Object(c.a)(z,2),_=P[0],L=P[1];Object(r.useEffect)((function(){return t(E(R,T,x)),function(){t((function(e){e({type:w,payload:[]})}))}}),[x]),Object(r.useEffect)((function(){return t(E(R,T,x)),null!==m&&void 0!==m&&m.length&&L(m),function(){}}),[m]);return Object(H.jsxs)(r.Fragment,{children:[Object(H.jsx)(i.a,{breadCrumbTitle:Object(H.jsx)(l.a,{id:"ChatRequests"}),breadCrumbActive:Object(H.jsx)(l.a,{id:"Chat Requests"})}),Object(H.jsxs)(d.a,{children:[Object(H.jsx)(o.a,{loading:n}),Object(H.jsx)(b.a,{className:"mx-0 p-1",children:Object(H.jsxs)(p.a,{className:"d-flex mt-1",md:"6",sm:"12",children:[Object(H.jsx)(j.a,{className:"mr-1",for:"search-input",children:"Search"}),Object(H.jsx)(f.a,{className:"dataTable-filter mb-50",type:"text",bsSize:"sm",id:"search-input",value:x,onChange:function(e){return t=e.currentTarget.value,y(t),void setTimeout((function(){E(R,T,t)}),100);var t}})]})}),Object(H.jsx)(h.a,{noHeader:!0,pagination:!0,paginationServer:!0,columns:Y||[],paginationPerPage:R,className:"react-dataTable",sortIcon:Object(H.jsx)(O.a,{size:10}),paginationDefaultPage:T+1,paginationComponent:function(){return Object(H.jsx)(A.a,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:0!==T?T-1:0,onPageChange:function(e){return function(e){t(E(R,e.selected,x)),q(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pr-1"})},data:_})]})]})}}}]);
//# sourceMappingURL=26.97ffcb18.chunk.js.map